(()=>{var e={};e.id=703,e.ids=[703,888,660],e.modules={6252:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{config:()=>b,default:()=>x,getServerSideProps:()=>g,getStaticPaths:()=>m,getStaticProps:()=>h,reportWebVitals:()=>p,routeModule:()=>S,unstable_getServerProps:()=>y,unstable_getServerSideProps:()=>N,unstable_getStaticParams:()=>v,unstable_getStaticPaths:()=>j,unstable_getStaticProps:()=>f});var a=s(7093),l=s(5244),i=s(1323),n=s(1682),c=s.n(n),d=s(7260),o=s(3504),u=e([o]);o=(u.then?(await u)():u)[0];let x=(0,i.l)(o,"default"),h=(0,i.l)(o,"getStaticProps"),m=(0,i.l)(o,"getStaticPaths"),g=(0,i.l)(o,"getServerSideProps"),b=(0,i.l)(o,"config"),p=(0,i.l)(o,"reportWebVitals"),f=(0,i.l)(o,"unstable_getStaticProps"),j=(0,i.l)(o,"unstable_getStaticPaths"),v=(0,i.l)(o,"unstable_getStaticParams"),y=(0,i.l)(o,"unstable_getServerProps"),N=(0,i.l)(o,"unstable_getServerSideProps"),S=new a.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/protected/dashboard",pathname:"/protected/dashboard",bundlePath:"",filename:""},components:{App:d.default,Document:c()},userland:o});r()}catch(e){r(e)}})},5097:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.d(t,{Z:()=>d});var a=s(997),l=s(6689),i=s(9648),n=s(1649),c=e([i]);i=(c.then?(await c)():c)[0];let d=({btcaddress:e})=>{let[t,s]=(0,l.useState)(null),{data:r,status:c}=(0,n.useSession)();return(0,l.useEffect)(()=>{(async()=>{if(e&&r)try{let t=(await i.default.get(`https://api.bitcore.io/api/BTC/mainnet/address/${e}/balance`)).data.balance,r=parseFloat(t)/1e8;isNaN(r)?s(null):s(r)}catch(e){console.error("Error fetching balance:",e),s(null)}})()},[e,r]),(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[a.jsx("h2",{className:"text-1xl font-bold mb-4",children:"Estimated Balance"}),(0,a.jsxs)("h1",{className:"text-1xl font-bold mb-2",children:["BTC Address: ",e||"Loading..."]}),null!==t?(0,a.jsxs)("p",{className:"mb-2",children:["Balance: ",t.toFixed(8)," BTC"]}):a.jsx("p",{children:"Loading balance..."})]})};r()}catch(e){r(e)}})},1544:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var r=s(997);s(6689);var a=s(1163);let l=({btcAddress:e})=>{let t=(0,a.useRouter)();return(0,r.jsxs)("div",{className:"mt-8",children:[r.jsx("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mr-4",onClick:()=>{e&&t.push({pathname:"/protected/deposit",query:{address:e}})},children:"Deposit"}),r.jsx("button",{className:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded",onClick:()=>{e&&t.push({pathname:"/protected/withdraw",query:{address:e}})},children:"Withdraw"})]})}},878:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var r=s(997),a=s(6689),l=s(1649);let i=({userId:e,email:t})=>{let{data:s,status:i}=(0,l.useSession)(),[n,c]=(0,a.useState)(null),[d,o]=(0,a.useState)(null),[u,x]=(0,a.useState)(!0),h=()=>{localStorage.removeItem("userId"),localStorage.removeItem("email"),c(null),o(null)};(0,a.useEffect)(()=>{},[s]);let m=async()=>{await (0,l.signOut)({redirect:!0,callbackUrl:"/"}),h()};return u||"loading"===i?r.jsx("div",{children:"Loading..."}):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[r.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Login Successful"}),(0,r.jsxs)("p",{className:"text-xl mb-4",children:["Welcome, ",r.jsx("br",{}),r.jsx("br",{}),"your user ID is: ",n&&r.jsx("span",{className:"text-red-500",children:n})," "]}),r.jsx("p",{className:"text-xl mb-4",children:d&&(0,r.jsxs)(r.Fragment,{children:["E-mail: ",r.jsx("span",{className:"text-red-500",children:d})]})}),r.jsx("button",{className:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded mt-4",onClick:m,children:"Logout"})]})}},1072:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.d(t,{Z:()=>u});var a=s(997),l=s(6689),i=s(9648),n=s(1649),c=s(5097),d=s(1544),o=e([i,c]);[i,c]=o.then?(await o)():o;let u=({userId:e,email:t})=>{let{data:s}=(0,n.useSession)(),[r,o]=(0,l.useState)(null);return(0,l.useEffect)(()=>{},[e]),(0,l.useEffect)(()=>{let e=async e=>{try{console.log("Fetching BTC address for userId:",e);let{btcAddress:t}=(await i.default.post("https://nodejsbtc.onrender.com/createbtcwallet",{userId:e})).data;t?(o(t),localStorage.setItem(`btcAddress_${e}`,t)):console.error("Endere\xe7o BTC n\xe3o foi retornado.")}catch(e){console.error("Erro ao buscar endere\xe7o BTC:",e)}};s?.user?.id&&e(s.user.id)},[s]),(0,a.jsxs)("div",{children:[a.jsx(c.Z,{btcaddress:r}),a.jsx(d.Z,{btcAddress:r})]})};r()}catch(e){r(e)}})},7260:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var r=s(997),a=s(6689);let l=(0,a.createContext)(void 0),i=({children:e})=>{let[t,s]=(0,a.useState)(()=>!1);return(0,a.useEffect)(()=>{t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",t?"dark":"light")},[t]),r.jsx(l.Provider,{value:{darkMode:t,toggleDarkMode:()=>{s(e=>!e)}},children:e})},n=()=>{let e=(0,a.useContext)(l);if(!e)throw Error("useTheme must be used within a ThemeProvider");return e};s(9603);let c=()=>r.jsx("footer",{className:"w-full p-4 bg-blue-300 dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:(0,r.jsxs)("div",{className:"container mx-auto px-4",children:[r.jsx("p",{className:"text-center",children:"\xa9 2024 Diana Global"}),(0,r.jsxs)("div",{className:"flex justify-center mt-4",children:[r.jsx("a",{href:"#",className:"mx-2 hover:text-gray-300",children:"Privacy Notice"}),r.jsx("a",{href:"#",className:"mx-2 hover:text-gray-300",children:"Terms of Service"}),r.jsx("a",{href:"#",className:"mx-2 hover:text-gray-300",children:"Cookies Policy"}),r.jsx("a",{href:"#",className:"mx-2 hover:text-gray-300",children:"Disclosures"})]})]})});var d=s(1664),o=s.n(d),u=s(1192),x=s(2925);let h=()=>{let{darkMode:e,toggleDarkMode:t}=n(),[s,l]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{null!==localStorage.getItem("darkMode")&&t(),l(!0)},[t]),s)?r.jsx("button",{onClick:t,className:"focus:outline-none",children:e?r.jsx(u.TLr,{}):r.jsx(x.YM8,{})}):null},m=()=>{let[e,t]=(0,a.useState)(!1),s=()=>{t(e=>!e)},l=()=>{t(!1)};return(0,r.jsxs)("nav",{className:"w-full p-4 bg-blue-300 text-gray-900 dark:bg-black dark:text-gray-100",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center w-full max-w-7xl mx-auto px-4",children:[r.jsx("div",{className:"text-xl font-bold",children:r.jsx(o(),{href:"/App",legacyBehavior:!0,children:r.jsx("a",{children:"Diana Global"})})}),(0,r.jsxs)("div",{className:"flex space-x-4 items-center md:hidden",children:[!e&&r.jsx(h,{}),r.jsx("button",{onClick:s,className:"focus:outline-none",children:e?r.jsx(u.aHS,{}):r.jsx(u.Fm7,{})})]}),(0,r.jsxs)("ul",{className:"hidden md:flex md:flex-row md:items-center md:space-x-4",children:[r.jsx("li",{children:r.jsx(o(),{href:"/login",legacyBehavior:!0,children:r.jsx("a",{className:"px-4 py-2 bg-white text-black rounded hover:bg-blue-100 transition",children:"Login"})})}),r.jsx("li",{children:r.jsx(o(),{href:"/signup",legacyBehavior:!0,children:r.jsx("a",{className:"px-4 py-2 bg-white text-black rounded hover:bg-blue-100 transition",children:"Sign Up"})})}),r.jsx("div",{className:"hidden md:block",children:r.jsx(h,{})})]})]}),e&&(0,r.jsxs)("div",{className:"fixed inset-0 z-50 flex flex-col bg-blue-300 text-gray-900 dark:bg-black dark:text-gray-100 md:hidden",children:[r.jsx("div",{className:"flex justify-end w-full p-4",children:r.jsx("button",{onClick:s,className:"text-white focus:outline-none",children:r.jsx(u.aHS,{size:24})})}),(0,r.jsxs)("ul",{className:"flex flex-row w-full mt-4",children:[r.jsx("li",{className:"w-1/2 flex justify-center",children:r.jsx(o(),{href:"/login",legacyBehavior:!0,children:r.jsx("a",{onClick:l,className:"px-4 py-2 bg-white text-black rounded hover:bg-blue-100 transition w-11/12 text-center",children:"Login"})})}),r.jsx("li",{className:"w-1/2 flex justify-center",children:r.jsx(o(),{href:"/signup",legacyBehavior:!0,children:r.jsx("a",{onClick:l,className:"px-4 py-2 bg-white text-black rounded hover:bg-blue-100 transition w-11/12 text-center",children:"Sign Up"})})})]})]})]})},g=({children:e})=>(0,r.jsxs)("div",{children:[r.jsx(m,{}),e,r.jsx(c,{})]});var b=s(1649);let p=function({Component:e,pageProps:t,...s}){return r.jsx(b.SessionProvider,{session:t,children:r.jsx(i,{children:r.jsx(g,{children:r.jsx(e,{...s})})})})}},3504:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{default:()=>o,getServerSideProps:()=>d});var a=s(997);s(9603),s(6689);var l=s(1072),i=s(878),n=s(1649),c=e([l]);l=(c.then?(await c)():c)[0];let d=async e=>{let t=await (0,n.getSession)(e);if(!t)return{redirect:{destination:"/login",permanent:!1}};let{id:s,email:r}=t.user;return s&&r?{props:{userId:s,email:r}}:(console.error("UserId or email is missing in session.user"),{redirect:{destination:"/login",permanent:!1}})},o=({userId:e,email:t})=>a.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100 dark:bg-black",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-center space-y-4 md:space-y-0 md:space-x-4",children:[a.jsx("div",{className:"bg-white p-8 rounded shadow-md w-96 h-96 text-center",children:a.jsx(i.Z,{userId:e,email:t})}),a.jsx("div",{className:"bg-blue-200 p-8 rounded shadow-md w-96 h-96 text-center",children:a.jsx(l.Z,{userId:e,email:t})})]})});r()}catch(e){r(e)}})},9603:()=>{},1649:e=>{"use strict";e.exports=require("next-auth/react")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},9648:e=>{"use strict";e.exports=import("axios")},7147:e=>{"use strict";e.exports=require("fs")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},9796:e=>{"use strict";e.exports=require("zlib")}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[13,492,682,342],()=>s(6252));module.exports=r})();